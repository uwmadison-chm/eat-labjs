{
  "components": {
    "1": {
      "id": "1",
      "type": "lab.canvas.Screen",
      "content": [
        {
          "type": "i-text",
          "version": "2.7.0",
          "originX": "center",
          "originY": "center",
          "left": 0,
          "top": -250,
          "width": 320.32,
          "height": 36.16,
          "fill": "black",
          "stroke": null,
          "strokeWidth": 1,
          "strokeDashArray": null,
          "strokeLineCap": "butt",
          "strokeDashOffset": 0,
          "strokeLineJoin": "round",
          "strokeMiterLimit": 4,
          "scaleX": 1,
          "scaleY": 1,
          "angle": 0,
          "flipX": false,
          "flipY": false,
          "opacity": 1,
          "shadow": null,
          "visible": true,
          "clipTo": null,
          "backgroundColor": "",
          "fillRule": "nonzero",
          "paintFirst": "fill",
          "globalCompositeOperation": "source-over",
          "transformMatrix": null,
          "skewX": 0,
          "skewY": 0,
          "text": "Instructions go here",
          "fontSize": 32,
          "fontWeight": "normal",
          "fontFamily": "sans-serif",
          "fontStyle": "normal",
          "lineHeight": 1.16,
          "underline": false,
          "overline": false,
          "linethrough": false,
          "textAlign": "center",
          "textBackgroundColor": "",
          "charSpacing": 0,
          "id": "3",
          "styles": {}
        },
        {
          "type": "i-text",
          "version": "2.7.0",
          "originX": "center",
          "originY": "center",
          "left": 0,
          "top": 25,
          "width": 680.72,
          "height": 120.05,
          "fill": "black",
          "stroke": null,
          "strokeWidth": 1,
          "strokeDashArray": null,
          "strokeLineCap": "butt",
          "strokeDashOffset": 0,
          "strokeLineJoin": "round",
          "strokeMiterLimit": 4,
          "scaleX": 1,
          "scaleY": 1,
          "angle": 0,
          "flipX": false,
          "flipY": false,
          "opacity": 1,
          "shadow": null,
          "visible": true,
          "clipTo": null,
          "backgroundColor": "",
          "fillRule": "nonzero",
          "paintFirst": "fill",
          "globalCompositeOperation": "source-over",
          "transformMatrix": null,
          "skewX": 0,
          "skewY": 0,
          "text": "If you need to resize this window,\nplease do that now before starting.\nDo not resize the window after continuing.",
          "fontSize": "20",
          "fontWeight": "normal",
          "fontFamily": "sans-serif",
          "fontStyle": "normal",
          "lineHeight": 1.16,
          "underline": false,
          "overline": false,
          "linethrough": false,
          "textAlign": "center",
          "textBackgroundColor": "",
          "charSpacing": 0,
          "id": "24",
          "styles": {}
        },
        {
          "type": "i-text",
          "version": "2.7.0",
          "originX": "center",
          "originY": "center",
          "left": 12,
          "top": 225,
          "width": 496.38,
          "height": 36.16,
          "fill": "black",
          "stroke": null,
          "strokeWidth": 1,
          "strokeDashArray": null,
          "strokeLineCap": "butt",
          "strokeDashOffset": 0,
          "strokeLineJoin": "round",
          "strokeMiterLimit": 4,
          "scaleX": 1,
          "scaleY": 1,
          "angle": 0,
          "flipX": false,
          "flipY": false,
          "opacity": 1,
          "shadow": null,
          "visible": true,
          "clipTo": null,
          "backgroundColor": "",
          "fillRule": "nonzero",
          "paintFirst": "fill",
          "globalCompositeOperation": "source-over",
          "transformMatrix": null,
          "skewX": 0,
          "skewY": 0,
          "text": "Press a key or click to continue",
          "fontSize": 32,
          "fontWeight": "normal",
          "fontFamily": "sans-serif",
          "fontStyle": "normal",
          "lineHeight": 1.16,
          "underline": false,
          "overline": false,
          "linethrough": false,
          "textAlign": "center",
          "textBackgroundColor": "",
          "charSpacing": 0,
          "id": "25",
          "styles": {}
        }
      ],
      "files": {
        "rows": []
      },
      "parameters": {
        "rows": [
          [
            {
              "name": "",
              "value": "",
              "type": "string"
            }
          ]
        ]
      },
      "responses": {
        "rows": [
          [
            "",
            "keypress",
            "",
            ""
          ],
          [
            "",
            "click",
            "",
            ""
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "",
              "message": "",
              "code": ""
            }
          ]
        ]
      },
      "viewport": [
        800,
        600
      ],
      "title": "Instructions",
      "_tab": "Content"
    },
    "2": {
      "id": "2",
      "type": "lab.canvas.Screen",
      "content": [
        {
          "type": "i-text",
          "version": "2.7.0",
          "originX": "center",
          "originY": "center",
          "left": 0,
          "top": 0,
          "width": 415.86,
          "height": 120.05,
          "fill": "black",
          "stroke": null,
          "strokeWidth": 1,
          "strokeDashArray": null,
          "strokeLineCap": "butt",
          "strokeDashOffset": 0,
          "strokeLineJoin": "round",
          "strokeMiterLimit": 4,
          "scaleX": 1,
          "scaleY": 1,
          "angle": 0,
          "flipX": false,
          "flipY": false,
          "opacity": 1,
          "shadow": null,
          "visible": true,
          "clipTo": null,
          "backgroundColor": "",
          "fillRule": "nonzero",
          "paintFirst": "fill",
          "globalCompositeOperation": "source-over",
          "transformMatrix": null,
          "skewX": 0,
          "skewY": 0,
          "text": "Thank you.\n\nThe task is complete now.",
          "fontSize": 32,
          "fontWeight": "normal",
          "fontFamily": "sans-serif",
          "fontStyle": "normal",
          "lineHeight": 1.16,
          "underline": false,
          "overline": false,
          "linethrough": false,
          "textAlign": "center",
          "textBackgroundColor": "",
          "charSpacing": 0,
          "id": "25",
          "styles": {}
        }
      ],
      "files": {
        "rows": []
      },
      "parameters": {
        "rows": [
          [
            {
              "name": "",
              "value": "",
              "type": "string"
            }
          ]
        ]
      },
      "responses": {
        "rows": [
          [
            "",
            "",
            "",
            ""
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "",
              "message": "",
              "code": ""
            }
          ]
        ]
      },
      "viewport": [
        800,
        600
      ],
      "title": "End"
    },
    "3": {
      "id": "3",
      "type": "lab.html.Screen",
      "files": {
        "rows": []
      },
      "parameters": {
        "rows": [
          [
            {
              "name": "",
              "value": "",
              "type": "string"
            }
          ]
        ]
      },
      "responses": {
        "rows": [
          [
            "",
            "",
            "",
            ""
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "Video player",
              "message": "run",
              "code": "var container = document.getElementsByClassName(\"container\")[0];\nvar player = document.getElementById(\"player\");\nvar play_button = document.getElementById(\"play_button\");\nvar rating = document.getElementById(\"rating\");\nvar marker = document.getElementById(\"marker\");\nvar canplay = false;\nvar canrate = false;\nvar start_time;\nvar data = [];\nvar container_width = container.offsetWidth;\nvar width = window.innerWidth;\nvar margin = (width - container_width) / 2.0; \nvar marker_width = marker.innerWidth;\n\n// TODO: Correct source video from trial parameters\nplayer.src = \"https://brainimaging.waisman.wisc.edu/~dfitch/video/negative_ex1.mp4\"\n\n\n// TODO: window resize triggers to recalculate\n\nwindow.performance = window.performance || {};\nperformance.now = (function() {\n    return performance.now    ||\n        performance.mozNow    ||\n        performance.msNow     ||\n        performance.oNow      ||\n        performance.webkitNow ||            \n        Date.now  /*none found - fallback to browser default */\n})();\n\n\nfunction startVideo(){\n  if (canplay) {\n    canplay = false;\n    canrate = true;\n    player.play();\n    play_button.style.display = \"none\";\n    rating.style.display = \"block\";\n    start_time = performance.now();\n  }\n}\n\nfunction mouseMove(e){\n  if (!canrate) {\n    return;\n  }\n\n  current_x = e.pageX - margin;\n\n  // constrain to box\n  if (current_x < margin) {\n    current_x = margin\n  } else if (current_x > width - margin - 46) {\n    current_x = width - margin - marker_width\n  }\n\n  marker.style.marginLeft = (current_x - margin) + \"px\";\n\n  // normalize x by window width when storing\n  var stored_x = current_x / width\n  data.push({\n    value: current_x,\n    playerTime: player.currentTime,\n    browserTime: performance.now() - start_time,\n  });\n}\n\ndocument.addEventListener('mousemove', mouseMove, false);\n\nplayer.addEventListener(\"canplay\", function() {\n  canplay = true;\n  play_button.style.display = \"block\";\n});\n\nplayer.addEventListener(\"click\", function() {\n  startVideo();\n});\n\nplay_button.addEventListener(\"click\", function() {\n  startVideo();\n});"
            }
          ]
        ]
      },
      "title": "Trial",
      "content": "<div id=\"player_container\">\n  <video id=\"player\" preload width=\"100%\" type=\"video/mp4\">\n  </video>\n</div>\n\n<button id=\"play_button\">Play</button>\n\n<div id=\"rating\">\n  <span id=\"marker\">\n    &nbsp;\n  </span>\n</div>",
      "_tab": "Scripts"
    },
    "root": {
      "id": "root",
      "title": "root",
      "type": "lab.flow.Sequence",
      "children": [
        "1",
        "3",
        "2"
      ],
      "parameters": {
        "rows": [
          [
            {
              "name": "",
              "value": "",
              "type": "string"
            }
          ]
        ]
      },
      "plugins": [
        {
          "type": "lab.plugins.Metadata"
        }
      ],
      "metadata": {
        "title": "EAT - Empathic Accuracy Task",
        "description": "",
        "repository": "",
        "contributors": "Dan Fitch <dfitch@wisc.edu>"
      }
    }
  },
  "version": [
    19,
    1,
    0
  ],
  "files": {
    "files": {
      "index.html": {
        "content": "data:text/html,%3C!doctype%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%3Cmeta%20charset%3D%22utf-8%22%3E%0A%20%20%3Ctitle%3EExperiment%3C%2Ftitle%3E%0A%20%20%3C!--%20viewport%20setup%20--%3E%0A%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1%22%3E%0A%20%20%3C!--%20lab.js%20library%20and%20experiment%20code%20--%3E%0A%20%20%24%7B%20header%20%7D%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%20%20%3C!--%20If%20you'd%20rather%20have%20a%20container%20with%20a%20fixed%20width%0A%20%20%20%20%20%20%20and%20variable%20height%2C%20try%20removing%20the%20fullscreen%20class%20below%20--%3E%0A%20%20%3Cdiv%20class%3D%22container%20fullscreen%22%20data-labjs-section%3D%22main%22%3E%0A%20%20%20%20%3Cmain%20class%3D%22content-vertical-center%20content-horizontal-center%22%3E%0A%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%3Ch2%3ELoading%20Experiment%3C%2Fh2%3E%0A%20%20%20%20%20%20%20%20%3Cp%3EThe%20experiment%20is%20loading%20and%20should%20start%20in%20a%20few%20seconds%3C%2Fp%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%3C%2Fmain%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A",
        "source": "library"
      },
      "style.css": {
        "content": "data:text/css,%2F*%20Please%20define%20your%20custom%20styles%20here%20*%2F%0A%0Avideo%3A%3A-webkit-media-controls-fullscreen-button%2Cvideo%3A%3A-webkit-media-controls-play-button%2C%20video%3A%3A-webkit-media-controls-pausebutton%20%7B%0A%20%20%20%20display%3A%20none%3B%0A%7D%0A%0A%23player_container%20%7B%0A%20%20display%3A%20block%3B%0A%20%20margin%3A%200%20auto%3B%0A%7D%0A%0A%23play_button%20%7B%0A%20%20display%3A%20none%3B%0A%20%20font-size%3A%20200%25%3B%0A%7D%0A%0A%23rating%20%7B%0A%20%20display%3A%20none%3B%0A%20%20background-color%3A%20%23def%3B%0A%20%20border%3A%202px%20solid%20black%3B%0A%7D%0A%0A%23marker%20%7B%0A%20%20display%3A%20block%3B%0A%20%20width%3A%2040px%3B%0A%20%20height%3A%2040px%3B%0A%20%20background-color%3A%20%2344a%3B%0A%20%20border%3A%201px%20solid%20black%3B%0A%20%20border-radius%3A%200.5em%3B%0A%7D",
        "source": "library"
      }
    },
    "bundledFiles": {
      "lib/lab.js": {
        "type": "application/javascript"
      },
      "lib/lab.js.map": {
        "type": "text/plain"
      },
      "lib/lab.fallback.js": {
        "type": "application/javascript"
      },
      "lib/lab.legacy.js": {
        "type": "application/javascript"
      },
      "lib/lab.legacy.js.map": {
        "type": "text/plain"
      },
      "lib/lab.css": {
        "type": "text/css"
      },
      "lib/loading.svg": {
        "type": "image/svg+xml"
      }
    }
  }
}